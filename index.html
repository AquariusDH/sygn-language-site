<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sygn Language — Zodiac Translator</title>
  <meta name="description" content="Translate your message for any zodiac sign’s style. Join the waitlist to get the app first." />
  <meta name="theme-color" content="#0b0b0b" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root { --bg:#0b0b0b; --card:#141414; --muted:#9aa0a6; --brand:#3A86FF; --text:#fff; --border:#2a2a2a; }
    * { box-sizing: border-box; }
    html,body { margin:0; padding:0; background:var(--bg); color:var(--text); font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    a { color: var(--brand); text-decoration: none; }
    a:hover { text-decoration: underline; }
    .container { max-width: 980px; margin: 0 auto; padding: 24px; }
    .hero { text-align: center; margin: 24px 0 16px; }
    .h1 { font-weight: 800; font-size: clamp(28px, 3.5vw, 36px); letter-spacing: -0.02em; }
    .sub { color: var(--muted); margin-top: 6px; font-size: 15px; }
    .note { margin-top: 10px; color: var(--muted); font-size: 14px; }
    .card { background: var(--card); border: 1px solid var(--border); border-radius: 14px; padding: 16px; }
    .stack { display: grid; gap: 12px; }
    label { font-size: 13px; color: #d6d6d6; }
    select, input[type="email"], textarea, input[type="text"] {
      width: 100%; background: #0f0f0f; color: var(--text); border: 1px solid var(--border);
      border-radius: 10px; padding: 10px 12px; font-size: 14px; outline: none;
    }
    textarea { min-height: 110px; resize: vertical; }
    .row { display: grid; gap: 12px; grid-template-columns: 1fr 1fr; }
    .btn { background: var(--brand); color: #000; font-weight: 700; border: 0; border-radius: 10px; padding: 12px 14px; cursor: pointer; }
    .btn:disabled { opacity: .6; cursor: not-allowed; }
    .out { white-space: pre-wrap; background:#0f0f0f; border: 1px solid var(--border); padding: 12px; border-radius: 10px; font-size: 14px; }
    .muted { color: var(--muted); }
    footer { margin: 28px 0 16px; text-align: center; color: var(--muted); font-size: 13px; }
    .grid { display: grid; gap: 16px; grid-template-columns: 1fr; }
    @media (min-width: 980px){ .grid { grid-template-columns: 2fr 1fr; } }
    .tilegrid { display:grid; gap:16px; grid-template-columns: 1fr; }
    @media (min-width: 980px){ .tilegrid { grid-template-columns: 1fr 1fr; } }
    .small { font-size:12px; color:#c9c9c9; }
  </style>
</head>
<body>
  <div class="container">
    <header class="hero">
      <div class="h1">Sygn Language — Zodiac Translator</div>
      <p class="sub">Rewrite your message for how their sign actually hears it.</p>
      <p class="note">App coming soon — join the waitlist below to be first to know.</p>
    </header>

    <!-- ==== MAIN TILES ==== -->
    <main class="tilegrid">
      <!-- Translator (now with Coach Styles) -->
      <section class="card">
        <h2 style="margin:0 0 12px; font-size:18px;">Text Reply Coach</h2>
        <div class="stack">
          <div class="row">
            <div>
              <label for="you">Your sign</label>
              <select id="you">
                <option>Aries</option><option>Taurus</option><option>Gemini</option><option>Cancer</option>
                <option>Leo</option><option>Virgo</option><option>Libra</option><option>Scorpio</option>
                <option>Sagittarius</option><option>Capricorn</option><option>Aquarius</option><option>Pisces</option>
              </select>
            </div>
            <div>
              <label for="them">Their sign</label>
              <select id="them">
                <option>Aries</option><option>Taurus</option><option>Gemini</option><option>Cancer</option>
                <option>Leo</option><option>Virgo</option><option>Libra</option><option>Scorpio</option>
                <option>Sagittarius</option><option>Capricorn</option><option>Aquarius</option><option>Pisces</option>
              </select>
            </div>
          </div>

          <div class="row">
            <div>
              <label for="coach">Coach style</label>
              <select id="coach">
                <option value="casual">Casual</option>
                <option value="flirty">Flirty</option>
                <option value="sincere">Sincere</option>
                <option value="direct">Direct</option>
              </select>
            </div>
            <div>
              <label for="scenario">Scenario</label>
              <select id="scenario">
                <option value="plan">Make plans</option>
                <option value="apology">Apologize / own up</option>
                <option value="affection">Show appreciation</option>
                <option value="boundary">Set a boundary</option>
                <option value="general">General / casual</option>
              </select>
            </div>
          </div>

          <div>
            <label for="msg">Your message (optional)</label>
            <input id="msg" type="text" placeholder="What you want to say (leave blank for ideas)"/>
            <div class="small" style="margin-top:4px;">We’ll tune it for their sign + your coach style.</div>
          </div>

          <button id="translate" class="btn">Generate replies</button>

          <div>
            <div class="muted" style="font-size:13px; margin-bottom:6px;">Suggested tone</div>
            <div id="tone" class="out">—</div>
          </div>

          <div>
            <div class="muted" style="font-size:13px; margin-bottom:6px;">Reply suggestions (3)</div>
            <div id="output" class="out">—</div>
          </div>
        </div>
      </section>

      <!-- Date & Plan Generator -->
      <section class="card">
        <h2 style="margin:0 0 12px; font-size:18px;">Date & Plan Generator</h2>
        <div class="stack">
          <div class="row">
            <div>
              <label for="budget">Budget</label>
              <select id="budget">
                <option value="low">Low ($)</option>
                <option value="mid" selected>Medium ($$)</option>
                <option value="high">High ($$$)</option>
              </select>
            </div>
            <div>
              <label for="vibe">Vibe</label>
              <select id="vibe">
                <option value="chill">Chill / cozy</option>
                <option value="adventure">Adventurous</option>
                <option value="creative">Creative</option>
                <option value="foodie" selected>Foodie</option>
                <option value="romantic">Romantic</option>
              </select>
            </div>
          </div>

          <button id="planBtn" class="btn">Get 3 sign‑tuned ideas</button>

          <div>
            <div class="muted" style="font-size:13px; margin-bottom:6px;">Ideas for <span id="planSign">their sign</span></div>
            <div id="plans" class="out">—</div>
          </div>
        </div>
      </section>
    </main>

    <!-- Waitlist -->
    <section class="grid" style="margin-top:16px;">
      <aside class="card">
        <h2 style="margin:0 0 12px; font-size:18px;">Get the app first</h2>
        <p class="muted" style="margin-top:-6px;">Join the waitlist and we’ll email you when it launches.</p>
        <form id="waitlist" class="stack" novalidate>
          <div>
            <label for="email">Email</label>
            <input id="email" name="email" type="email" placeholder="you@email.com" required />
          </div>
          <label style="display:flex; gap:8px; align-items:flex-start; font-size:13px; color:#d6d6d6;">
            <input type="checkbox" id="consent" required />
            <span>I agree to receive product updates. Unsubscribe anytime.</span>
          </label>
          <button class="btn" id="join">Join waitlist</button>
          <div id="form-status" class="muted" role="status" aria-live="polite"></div>
        </form>
      </aside>
    </section>

    <footer>
      © <span id="year"></span> Sygn Language ·
      <a href="/terms.html">Terms</a> · <a href="/privacy.html">Privacy</a>
    </footer>
  </div>

  <script>
    // Year
    document.getElementById('year').textContent = new Date().getFullYear();

    // ===== Sign tones =====
    const tones = {
      Aries: "Direct, bold, solution-first.",
      Taurus: "Steady, specific, show reliability.",
      Gemini: "Playful, curious—invite a quick reply.",
      Cancer: "Warm, reassuring—name the feeling.",
      Leo: "Confident, appreciative—add a little hype.",
      Virgo: "Clear, structured, no ambiguity.",
      Libra: "Balanced, considerate—offer two options.",
      Scorpio: "Intentional, honest—no fluff.",
      Sagittarius: "Upbeat, spontaneous—keep it light.",
      Capricorn: "Respectful of time—clear next steps.",
      Aquarius: "Thoughtful, original—explain the why.",
      Pisces: "Gentle, empathetic—soft edges."
    };

    const pick = (arr) => arr[Math.floor(Math.random() * arr.length)];
    const clean = (s) => (s || "").trim().replace(/\s+/g, " ");

    // ===== Translator engine with coach styles =====
    function detectIntentFromScenario(s) { return s || "general"; }

    const coachMods = {
      casual:  { prefix: ["Hey—","Yo—","Quick thing—"], suffix:["Thoughts?","Cool?","Lmk"] },
      flirty:  { prefix: ["Low‑key…","Confession:","Okay but—"], suffix:["😉","✨","Kinda want this." ] },
      sincere: { prefix: ["Real talk:","Honestly—","From me:"], suffix:["Appreciate you.","Means a lot to me.","Saying this with care."] },
      direct:  { prefix: ["Straight up—","Here’s the deal:","Cutting to it—"], suffix:["Confirm?","Works for you?","Deal?"] }
    };

    const styleAsks = {
      Aries: ["Let’s decide now.", "Pick one and go.", "Ready to run with it?"],
      Taurus:["I’ll handle it.", "Keeping it simple.", "We can pace it."],
      Gemini:["What’s your take?", "Shoot me a quick reply?", "Give me your spin?"],
      Cancer:["How does that feel?", "Okay with you?", "Cool if we try?"],
      Leo:["Let’s make it fun.", "You in?", "Want to lead this?"],
      Virgo:["Confirm?", "Good with details?", "Can we lock it?"],
      Libra:["A or B?", "Which vibe fits?", "What feels fair?"],
      Scorpio:["Honest take?", "Are you aligned?", "Truth time?"],
      Sagittarius:["Up for it?", "Say yes, we go.", "We can switch it up."],
      Capricorn:["Confirm time?", "Does this work?", "Green light?"],
      Aquarius:["Make sense?", "On board?", "Logic check?"],
      Pisces:["Does this resonate?", "Feel okay?", "Open‑hearted yes?"]
    };

    function buildReplies(them, coach, scenario, userMsg) {
      const msg = clean(userMsg);
      const tone = tones[them] || "—";
      const mod = coachMods[coach] || coachMods.casual;
      const ask = pick(styleAsks[them] || ["Thoughts?"]);
      const p = pick(mod.prefix);
      const s = pick(mod.suffix);

      // scenario templates (simple but varied)
      const T = {
        apology: [
          `${p} I was off earlier. ${msg || "That wasn’t fair."} I’m fixing it. ${ask} ${s}`,
          `${p} You were right—${msg || "I didn’t handle that well."} I’ll do better. ${s}`,
          `${p} Owning it: ${msg || "I messed up."} Thanks for the patience. ${ask}`
        ],
        boundary: [
          `${p} Quick flag: ${msg || "I’m low on capacity today."} Can we pick this up later? ${s}`,
          `${p} I need a little space to reset. ${msg || "Still in—just pacing it."} ${ask}`,
          `${p} For my sanity, ${msg || "let’s slow this down."} Appreciate you. ${s}`
        ],
        plan: [
          `${p} ${msg || "Dinner this week?"} I can do 7 or 8. ${ask} ${s}`,
          `${p} ${msg || "Movie or tacos?"} I’ll book it if you’re down. ${s}`,
          `${p} ${msg || "Coffee + walk?"} Low‑key works. I’ll send times. ${s}`
        ],
        affection: [
          `${p} ${msg || "Thinking of you."} Just wanted to say I appreciate you. ${s}`,
          `${p} ${msg || "You matter to me."} Hope that lands how I mean it. ${ask}`,
          `${p} ${msg || "Grateful for you."} Saying it out loud. ${s}`
        ],
        general: [
          `${p} ${msg || "Quick thought."} ${ask} ${s}`,
          `${p} ${msg || "Heads up—nothing heavy."} ${s}`,
          `${p} ${msg || "Idea worth a try."} ${ask}`
        ]
      };

      // pull 3 unique lines
      const variants = new Set();
      let guard = 0;
      const pool = T[detectIntentFromScenario(scenario)];
      while (variants.size < 3 && guard < 20) { variants.add(pick(pool)); guard++; }
      return { tone, replies: Array.from(variants) };
    }

    document.getElementById('translate').addEventListener('click', () => {
      const them = document.getElementById('them').value;
      const coach = document.getElementById('coach').value;
      const scenario = document.getElementById('scenario').value;
      const msg = document.getElementById('msg').value;

      const { tone, replies } = buildReplies(them, coach, scenario, msg);
      document.getElementById('tone').textContent = tone;
      document.getElementById('output').textContent = replies.map(r => `• ${r}`).join('\n');
    });

    // ===== Date & Plan Generator =====
    const signAngles = {
      Aries:{ loves:["spontaneous","active","game"], avoid:["stale"] },
      Taurus:{ loves:["cozy","food","sensory"], avoid:["rushed"] },
      Gemini:{ loves:["conversation","variety","short"], avoid:["silent"] },
      Cancer:{ loves:["homey","comfort","nostalgia"], avoid:["cold"] },
      Leo:{ loves:["spotlight","glam","photo"], avoid:["low‑effort"] },
      Virgo:{ loves:["organized","clean","quality"], avoid:["chaos"] },
      Libra:{ loves:["aesthetic","balanced","cute"], avoid:["harsh"] },
      Scorpio:{ loves:["intense","private","mystery"], avoid:["surface"] },
      Sagittarius:{ loves:["adventure","outdoors","new"], avoid:["rigid"] },
      Capricorn:{ loves:["purpose","elevated","on‑time"], avoid:["messy"] },
      Aquarius:{ loves:["quirky","brainy","cause"], avoid:["basic"] },
      Pisces:{ loves:["dreamy","music","water"], avoid:["loud"] },
    };

    const baseIdeas = {
      chill: [
        "cozy cafe + board game duel",
        "cook a simple recipe together + playlist swap",
        "sunset walk + hot cocoa"
      ],
      adventure: [
        "mini road trip to a nearby town",
        "rent bikes or scooters and explore",
        "indoor rock‑climbing intro session"
      ],
      creative: [
        "paint‑n‑sip at home with cheap canvases",
        "polaroid photo hunt around the city",
        "pottery or candle‑making workshop"
      ],
      foodie: [
        "taco crawl (3 spots, 1 taco each)",
        "farmers market + cook what we buy",
        "try a cuisine neither of us has had"
      ],
      romantic: [
        "stargazing + shared playlist + snacks",
        "late dessert date at a fancy spot",
        "hand‑written note exchange + slow walk"
      ]
    };

    const budgetTweaks = {
      low:   (idea) => idea.replace(/fancy|workshop|road trip/g, m => ({fancy:"cute",workshop:"YouTube tutorial night", "road trip":"bus ride adventure"}[m]) || idea),
      mid:   (idea) => idea, // as-is
      high:  (idea) => idea.replace(/cozy|simple|cheap|intro/g, m => ({cozy:"boutique",simple:"three‑course",cheap:"artisan",intro:"private coach"}[m]) || idea)
    };

    function signPolish(sign, idea){
      const a = signAngles[sign] || {loves:[], avoid:[]};
      // add a small, sign‑specific flourish
      const add = {
        Aries:" + quick challenge",
        Taurus:" + great dessert",
        Gemini:" + 20‑min topic swap",
        Cancer:" + bring a childhood snack",
        Leo:" + dress a little extra",
        Virgo:" + clear plan + on‑time",
        Libra:" + cute photo spot",
        Scorpio:" + private corner",
        Sagittarius:" + pick a random turn",
        Capricorn:" + clean punctual vibe",
        Aquarius:" + quirky twist",
        Pisces:" + dreamy playlist"
      }[sign] || "";
      return idea + add;
    }

    function buildPlans(sign, budget, vibe){
      const pool = baseIdeas[vibe] || baseIdeas.foodie;
      const tweaks = budgetTweaks[budget] || ((x)=>x);
      const picks = new Set();
      let guard = 0;
      while (picks.size < 3 && guard < 20){
        guard++;
        const raw = pick(pool);
        const tweaked = tweaks(raw);
        picks.add(signPolish(sign, tweaked));
      }
      return Array.from(picks);
    }

    document.getElementById('planBtn').addEventListener('click', () => {
      const them = document.getElementById('them').value;
      const budget = document.getElementById('budget').value;
      const vibe = document.getElementById('vibe').value;
      document.getElementById('planSign').textContent = them;
      const ideas = buildPlans(them, budget, vibe);
      document.getElementById('plans').textContent = ideas.map(i => `• ${i}`).join('\n');
    });

    // ===== Waitlist form -> /api/signup (expects working API) =====
    const form = document.getElementById('waitlist');
    const statusEl = document.getElementById('form-status');
    const joinBtn = document.getElementById('join');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      statusEl.textContent = "";
      joinBtn.disabled = true; joinBtn.textContent = "Sending…";

      const email = document.getElementById('email').value.trim();
      const consent = document.getElementById('consent').checked;

      if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email) || !consent) {
        statusEl.textContent = "Please enter a valid email and agree to updates.";
        joinBtn.disabled = false; joinBtn.textContent = "Join waitlist";
        return;
      }

      try {
        const res = await fetch('/api/signup', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email, reward: 'waitlist' })
        });
        if (res.ok) {
          statusEl.textContent = "✅ Thanks! Check your inbox.";
          form.reset();
        } else {
          const j = await res.json().catch(()=>({}));
          statusEl.textContent = "❌ Could not send email. Try again.";
          console.error('Signup error', j);
        }
      } catch (err) {
        console.error(err);
        statusEl.textContent = "❌ Network error. Try again.";
      } finally {
        joinBtn.disabled = false; joinBtn.textContent = "Join waitlist";
      }
    });
  </script>
</body>
</html>
